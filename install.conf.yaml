- defaults:
    link:
      relink: true
      force: true

- clean: ["~"]

- create:
    - ~/.config/nvim

- link:
    ~/.alacritty.yml: .alacritty.yml
    ~/.bashrc: .bashrc
    ~/.dircolors: .dircolors
    ~/.tmux.conf: .tmux.conf
    ~/.theme.tmux: .theme.tmux
    ~/.zshrc: .zshrc
    ~/.config/nvim:
      create: true
      glob: true
      path: nvim
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    # Theming
    ~/.themes/nos-dark:
      create: true
      glob: true
      path: gnome/nos-dark
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    ~/.config/gtk-4.0/gtk.css: gnome/nos-dark/gtk.css
    ~/.config/gtk-3.0/gtk.css: gnome/nos-dark/gtk.css
    # ~/.themes/nos-dark/gtk-3.0/:
    #   create: true
    #   glob: true
    #   path: /usr/share/themes/adw-gtk3-dark/gtk-3.0/*
    #   if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    # ~/.themes/nos-dark/gtk-3.0/:
    #   create: true
    #   glob: true
    #   path: gnome/nos-dark/gtk-4.0/*
    #   if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    ~/.config/wireplumber:
      create: true
      glob: true
      path: wireplumber
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    ~/.config/spicetify/Themes/nos:
      create: true
      glob: true
      path: spicetify-theme
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    ~/.yabairc:
      path: .yabairc
      if: "[ `uname` = Darwin ]"
    ~/.skhdrc:
      path: .skhdrc
      if: "[ `uname` = Darwin ]"

- shell:
    # Set gnome themes (if running Gnome)
    - command: gsettings set org.gnome.desktop.interface gtk-theme nos-dark
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    - command: gsettings set org.gnome.desktop.wm.preferences theme nos-dark
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    # Set gnome custom keybinds (if running Gnome)
    - command: ./scripts/set_gnome_keybinds.sh
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
    # Set alacritty as default terminal emulator (mainly for pop_shell)
    - command: sudo ln -s /usr/bin/alacritty /usr/bin/x-terminal-emulator || true
      if: "[ $XDG_SESSION_DESKTOP = gnome ]"
