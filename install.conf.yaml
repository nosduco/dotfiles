---
- defaults:
    link:
      relink: true
      force: true
- clean: ["~"]
- shell:
    # Clone NvChad configuration to be overridden by custom config below
    - command: git -C ~/.config/nvim pull || git clone https://github.com/NvChad/NvChad ~/.config/nvim --depth 1
    # System files with sudo
    - command: sudo ln -sf $(pwd)/greetd/config.toml /etc/greetd/config.toml
      description: Installing greetd config
    - command: sudo mkdir -p /etc/systemd/system/greetd.service.d && sudo ln -sf $(pwd)/greetd/greetd.service.d/* /etc/systemd/system/greetd.service.d/
      description: Installing greetd service override
    # VPN/WireGuard system files (sudoers must be copied, not symlinked)
    - command: sudo cp $(pwd)/system/sudoers.d/wireguard /etc/sudoers.d/wireguard && sudo chown root:root /etc/sudoers.d/wireguard && sudo chmod 440 /etc/sudoers.d/wireguard
      description: Installing wireguard sudoers config
    - command: sudo cp $(pwd)/system/systemd/vpn-netns.service /etc/systemd/system/vpn-netns.service && sudo systemctl daemon-reload && sudo systemctl enable vpn-netns.service
      description: Installing VPN namespace systemd service
- link:
    # tty configurations
    ~/.dircolors: .dircolors
    ~/.tmux.conf: .tmux.conf
    ~/.theme.tmux: .theme.tmux
    # Fish (Shell)
    ~/.config/fish:
      create: true
      glob: true
      path: fish
    # Bat (Cat alternative)
    ~/.config/bat:
      create: true
      glob: true
      path: bat
    # Hyprland (WM)
    ~/.config/hypr:
      create: true
      glob: true
      path: hypr
      exclude: [hypr/host.conf, hypr/hypridle.conf, hypr/hyprlock.conf]
    # Wofi (Launcher)
    ~/.config/wofi:
      create: true
      glob: true
      path: wofi
    # Dunst (Notifications Daemon)
    ~/.config/dunst:
      create: true
      glob: true
      path: dunst
    # Waybar (Status Bar)
    ~/.config/waybar:
      create: true
      glob: true
      path: waybar
    # wlogout (Logout Menu)
    ~/.config/wlogout:
      create: true
      glob: true
      path: wlogout
    # Cava (Music Visualizer)
    ~/.config/cava:
      create: true
      glob: true
      path: cava
    # Starship (Shell Prompt)
    ~/.config/starship.toml: starship.toml
    # Ghostty (terminal emulator)
    ~/.config/ghostty:
      create: true
      glob: true
      path: ghostty
    # Neovim
    ~/.config/nvim/:
      create: true
      glob: true
      path: nvim
    # Spicetify (Spotify Theming)
    ~/.config/spicetify/:
      create: true
      glob: true
      path: spicetify
    # StreamController (Stream Deck)
    ~/.var/app/com.core447.StreamController/data/:
      create: true
      glob: true
      path: streamcontroller
    # Posting (HTTP Client)
    ~/.config/posting/:
      create: true
      glob: true
      path: posting
    # Yazi (File Manager)
    ~/.config/yazi/:
      create: true
      glob: true
      path: yazi
    # Walker/Elephant (Launcher)
    ~/.config/walker:
      create: true
      glob: true
      path: walker
    ~/.config/elephant:
      create: true
      glob: true
      path: elephant
    ~/.config/btop:
      create: true
      glob: true
      path: btop
    # Desktop Applications (Wayland flags)
    ~/.local/share/applications:
      create: true
      glob: true
      path: applications/*
    # VPN scripts
    ~/.local/bin/vpn-up:
      path: scripts/vpn/vpn-up.sh
      create: true
    ~/.local/bin/vpn-down:
      path: scripts/vpn/vpn-down.sh
      create: true
    ~/.local/bin/vpn-toggle:
      path: scripts/vpn/vpn-toggle.sh
      create: true
    ~/.local/bin/vpn-menu:
      path: scripts/vpn/vpn-menu.sh
      create: true
    ~/.local/bin/vpn-status:
      path: scripts/vpn/vpn-status.sh
      create: true
    ~/.local/bin/novpn-exec:
      path: scripts/vpn/novpn-exec.sh
      create: true

# Nighthawk (Desktop)
- defaults:
    link:
      if: "[ $(hostname) = nighthawk ]"
- link:
    # Audio settings
    ~/.config/wireplumber:
      create: true
      glob: true
      path: wireplumber
    # Hyprland
    ~/.config/hypr/host.conf:
      path: hypr/host/nighthawk.conf
    ~/.config/hypr/hypridle.conf:
      path: hypr/hypridle/nighthawk.conf
    ~/.config/hypr/hyprlock.conf:
      path: hypr/hyprlock/nighthawk.conf
# Voyager (Laptop)
- defaults:
    link:
      if: "[ $(hostname) = voyager ]"
- link:
    # Hyprland
    ~/.config/hypr/host.conf:
      path: hypr/host/voyager.conf
    ~/.config/hypr/hypridle.conf:
      path: hypr/hypridle/voyager.conf
    ~/.config/hypr/hyprlock.conf:
      path: hypr/hyprlock/voyager.conf
